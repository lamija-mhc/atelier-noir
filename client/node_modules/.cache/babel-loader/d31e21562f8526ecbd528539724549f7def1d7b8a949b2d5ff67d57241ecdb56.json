{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";function Counter(_ref){let{target,duration=2000,start=0}=_ref;const[count,setCount]=useState(start);const ref=useRef();const started=useRef(false);useEffect(()=>{const observer=new IntersectionObserver(_ref2=>{let[entry]=_ref2;if(entry.isIntersecting&&!started.current){started.current=true;let current=start;const end=parseFloat(target);const totalSteps=Math.abs(end-start);const stepTime=Math.abs(Math.floor(duration/totalSteps));const timer=setInterval(()=>{current+=1;setCount(()=>{if(current>=end){clearInterval(timer);return end;}return current;});},stepTime);}},{threshold:0.5});if(ref.current){observer.observe(ref.current);}return()=>{if(ref.current){observer.unobserve(ref.current);}};},[target,duration,start]);return/*#__PURE__*/_jsx(\"strong\",{ref:ref,className:\"counter\",children:Number.isInteger(target)?Math.floor(count):count.toFixed(1)});}export default Counter;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","Counter","_ref","target","duration","start","count","setCount","ref","started","observer","IntersectionObserver","_ref2","entry","isIntersecting","current","end","parseFloat","totalSteps","Math","abs","stepTime","floor","timer","setInterval","clearInterval","threshold","observe","unobserve","className","children","Number","isInteger","toFixed"],"sources":["C:/Users/muki_/Desktop/atelier-noir/client/src/components/counter.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nfunction Counter({ target, duration = 2000, start = 0 }) {\r\n  const [count, setCount] = useState(start);\r\n  const ref = useRef();\r\n  const started = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting && !started.current) {\r\n          started.current = true;\r\n          let current = start;\r\n          const end = parseFloat(target);\r\n          const totalSteps = Math.abs(end - start);\r\n          const stepTime = Math.abs(Math.floor(duration / totalSteps));\r\n\r\n          const timer = setInterval(() => {\r\n            current += 1;\r\n            setCount(() => {\r\n              if (current >= end) {\r\n                clearInterval(timer);\r\n                return end;\r\n              }\r\n              return current;\r\n            });\r\n          }, stepTime);\r\n        }\r\n      },\r\n      { threshold: 0.5 }\r\n    );\r\n\r\n    if (ref.current) {\r\n      observer.observe(ref.current);\r\n    }\r\n\r\n    return () => {\r\n      if (ref.current) {\r\n        observer.unobserve(ref.current);\r\n      }\r\n    };\r\n  }, [target, duration, start]);\r\n\r\n  return (\r\n    <strong ref={ref} className=\"counter\">\r\n      {Number.isInteger(target) ? Math.floor(count) : count.toFixed(1)}\r\n    </strong>\r\n  );\r\n}\r\n\r\n\r\nexport default Counter;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE3D,QAAS,CAAAC,OAAOA,CAAAC,IAAA,CAAyC,IAAxC,CAAEC,MAAM,CAAEC,QAAQ,CAAG,IAAI,CAAEC,KAAK,CAAG,CAAE,CAAC,CAAAH,IAAA,CACrD,KAAM,CAACI,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAACS,KAAK,CAAC,CACzC,KAAM,CAAAG,GAAG,CAAGV,MAAM,CAAC,CAAC,CACpB,KAAM,CAAAW,OAAO,CAAGX,MAAM,CAAC,KAAK,CAAC,CAE7BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,QAAQ,CAAG,GAAI,CAAAC,oBAAoB,CACvCC,KAAA,EAAa,IAAZ,CAACC,KAAK,CAAC,CAAAD,KAAA,CACN,GAAIC,KAAK,CAACC,cAAc,EAAI,CAACL,OAAO,CAACM,OAAO,CAAE,CAC5CN,OAAO,CAACM,OAAO,CAAG,IAAI,CACtB,GAAI,CAAAA,OAAO,CAAGV,KAAK,CACnB,KAAM,CAAAW,GAAG,CAAGC,UAAU,CAACd,MAAM,CAAC,CAC9B,KAAM,CAAAe,UAAU,CAAGC,IAAI,CAACC,GAAG,CAACJ,GAAG,CAAGX,KAAK,CAAC,CACxC,KAAM,CAAAgB,QAAQ,CAAGF,IAAI,CAACC,GAAG,CAACD,IAAI,CAACG,KAAK,CAAClB,QAAQ,CAAGc,UAAU,CAAC,CAAC,CAE5D,KAAM,CAAAK,KAAK,CAAGC,WAAW,CAAC,IAAM,CAC9BT,OAAO,EAAI,CAAC,CACZR,QAAQ,CAAC,IAAM,CACb,GAAIQ,OAAO,EAAIC,GAAG,CAAE,CAClBS,aAAa,CAACF,KAAK,CAAC,CACpB,MAAO,CAAAP,GAAG,CACZ,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAAC,CACJ,CAAC,CAAEM,QAAQ,CAAC,CACd,CACF,CAAC,CACD,CAAEK,SAAS,CAAE,GAAI,CACnB,CAAC,CAED,GAAIlB,GAAG,CAACO,OAAO,CAAE,CACfL,QAAQ,CAACiB,OAAO,CAACnB,GAAG,CAACO,OAAO,CAAC,CAC/B,CAEA,MAAO,IAAM,CACX,GAAIP,GAAG,CAACO,OAAO,CAAE,CACfL,QAAQ,CAACkB,SAAS,CAACpB,GAAG,CAACO,OAAO,CAAC,CACjC,CACF,CAAC,CACH,CAAC,CAAE,CAACZ,MAAM,CAAEC,QAAQ,CAAEC,KAAK,CAAC,CAAC,CAE7B,mBACEL,IAAA,WAAQQ,GAAG,CAAEA,GAAI,CAACqB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAClCC,MAAM,CAACC,SAAS,CAAC7B,MAAM,CAAC,CAAGgB,IAAI,CAACG,KAAK,CAAChB,KAAK,CAAC,CAAGA,KAAK,CAAC2B,OAAO,CAAC,CAAC,CAAC,CAC1D,CAAC,CAEb,CAGA,cAAe,CAAAhC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}